<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<script>/*<![CDATA[*/
  
    $(window).load(function () {
        
        tabla_opciones.aaSorting = [[ 4, "desc" ]];
    
        var tabla_labores = $('#tabla_labores').dataTable(tabla_opciones);
        
         $( "#fecha_desde" ).datepicker();
         
         $( "#fecha_hasta" ).datepicker();
        
    });
    
    
/*]]>*/</script> 
<div class="row" th:inline="text">
    <div class="col-xs-12 col-sm-7 col-md-7 col-lg-4">
        <h1 class="page-title txt-color-blueDark" ><i class="icon-shovel"></i> [[#{labores}]]</h1>
    </div>
    <div class="col-xs-12 col-sm-5 col-md-5 col-lg-8">
    </div>
</div>

    <!-- widget grid -->
    <section id="widget-grid" class="" th:inline="text">

        <!-- row -->
        <div class="row">

            <!-- NEW WIDGET START -->
            <article class="col-xs-12 col-sm-12 col-md-12 col-lg-12">

                <!-- Widget ID (each widget will need unique ID)-->
                <div class="jarviswidget" id="wid-id-0" data-widget-colorbutton="false"
                                                        data-widget-editbutton="false"
                                                        data-widget-togglebutton="true"
                                                        data-widget-deletebutton="false"
                                                        data-widget-fullscreenbutton="false"
                                                        data-widget-custombutton="false"
                                                        data-widget-collapsed="false" 
                                                        data-widget-sortable="false">
                    <header>
                        <h2><i class="fa fa-lg fa-fw fa-table"></i> <strong>[[#{tabla}]]</strong></h2>		
                        <div class="widget-toolbar"> 
                            
                            <a id="anadir-tipo-labor-link" class="btn btn-default btn-sm" 
                                style="display:inline-block" 
                               th:href="@{/labores/tabla/form/labor.html(id=-1)}">
                                 <span class="glyphicon glyphicon-plus"></span> [[#{anadir-labor}]]
                            </a>
                        </div>	
                    </header>

                    <!-- widget div-->
                    <div class="no-padding">
                        <!-- widget edit box -->
                        <div class="jarviswidget-editbox">
                        </div>
                        <!-- widget content -->
                        <div class="widget-body">
<!--                            <div class="widget-body-toolbar">

                            </div>-->
                            
                            <table id="tabla_labores" class="table table-striped table-bordered table-hover table-condensed">
                                <thead>
                                    <tr>
                                      <th>[[#{id-labor}]]</th>
                                      <!--<th>[[#{id-tipo-labor}]]</th>-->
                                      <th>[[#{parcela}]]</th>
                                      <th>[[#{grupo}]]</th>
                                      <th>[[#{nombre}]]</th>
                                      <th>[[#{fecha-comienzo}]]</th>
                                      <!--<th>[[#{cantidad-dosis-por-ha}]]</th>-->
                                      <th>[[#{litros-gasoil}]]</th>
                                      <th>[[#{duracion}]]</th>
                                      <th>[[#{maquinaria}]]</th>
                                      <th>[[#{producto}]]</th>
                                      <th>[[#{personal}]]</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr  th:each="labores_item : ${labores}">
                                      <td><a th:href="@{/labores/tabla/form/labor.html(id=${labores_item.id_labor})}">[[${labores_item.id_labor}]]</a></td>
                                      <!--<td>[[#{labores_item.id_tipo_labor}"><a th:href="@{/labores/tipo/tabla/form/labor.html(id=${labores_item.id_tipo_labor})}" th:text="${labores_item.id_tipo_labor}">[id_tipo_labor]</a></td>-->
                            <!--          <td th:each="tipoLabor_item : ${tiposLabores}" 
                                          th:if="${tipoLabor_item.id_tipo_labor == labores_item.id_tipo_labor}"
                                          th:text="${tipoLabor_item.nombre}">
                                          <a th:href="@{/labores/tipos/tabla/form/tipoLabor.html(id=${labores_item.id_tipo_labor})}" 
                                             th:text="${tipoLabor_item.nombre}">[tipolabor]</a>
                                      </td>-->
                            
                                      <td>
                                          <ul  th:if="${not #lists.isEmpty(labores_item.labor_parcela)}"
                                                class="nav nav-pills nav-stacked">
                                            <li th:each="laborParcela_item : ${labores_item.labor_parcela}"  class="label label-primary"
                                                style="margin-bottom: 3px">[[${laborParcela_item.parcela.nombre}]]</li>
                                          </ul>
                                      </td>
                                      <td>[[${labores_item.grupo}]]</td>
                                      <td>[[${labores_item.nombre}]]</td>
                                      <td>[[${#dates.format(labores_item.fecha_comienzo,'dd/MM/yyyy')}]]</td>
                                      <!--<td>[[#{#numbers.formatDecimal(labores_item.cantidad_dosis_por_ha,1,'POINT',0,'COMMA')}]]</td>-->
                                      <td>[[${#numbers.formatDecimal(labores_item.litros_gasoil,1,'POINT',2,'COMMA')}]]</td>
                                      <td>[[${#numbers.formatDecimal(labores_item.duracion,1,'POINT',2,'COMMA')}]]</td>
                                      <td>
                                          <ul  th:if="${not #lists.isEmpty(labores_item.labor_maquinaria)}"
                                                class="nav nav-pills nav-stacked">
                                            <li th:each="laborMaquinaria_item : ${labores_item.labor_maquinaria}" class="label label-primary"
                                                style="margin-bottom: 3px">[[${laborMaquinaria_item.maquinaria.nombre}]]</li>
                                          </ul>
                                      </td>
                                      <td>
                                          <ul  th:if="${not #lists.isEmpty(labores_item.labor_producto)}"
                                                class="nav nav-pills nav-stacked">
                                            <li th:each="laborProducto_item : ${labores_item.labor_producto}"  class="label label-primary"
                                                style="margin-bottom: 3px">[[${laborProducto_item.producto.nombre}]]</li>
                                          </ul>
                                      </td>
                                      <td>
                                          <ul  th:if="${not #lists.isEmpty(labores_item.labor_personal)}"
                                                class="nav nav-pills nav-stacked">
                                            <li th:each="laborPersonal_item : ${labores_item.labor_personal}"  class="label label-primary"
                                                style="margin-bottom: 3px">[[${laborPersonal_item.coste_personal.tipo}]]</li>
                                          </ul>
                                      </td>
                                   </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                </div>
            </article>
        </div>
    </section>
</html>