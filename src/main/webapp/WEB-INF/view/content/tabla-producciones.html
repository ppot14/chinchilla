<%@ taglib prefix="fmt"    uri="http://java.sun.com/jsp/jstl/fmt" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>

<script>
  
    $(window).load(function () {
        
        $('#producciones').dataTable({
            "bJQueryUI": true,
            "sPaginationType": "full_numbers"
//            "oLanguage": {
//                "sUrl": "../../../resources/json/dataTables.spanish.txt"
//            }
        });
        
        $( "#anadir-produccion-link" ).button();
        
    });
    
    
</script> 
<h2><fmt:message key="producciones"/></h2>
<a id="anadir-produccion-link" class="button" href="${pageContext.request.contextPath}/producciones/tabla/form/insertar/produccion.html?id=-1"><fmt:message key="anadir-produccion"/></a>
<table id="producciones">
    <thead>
        <tr>
          <th><fmt:message key="id_produccion"/></th>
          <th><fmt:message key="id_cultivo"/></th>
          <th><fmt:message key="id_parcela"/></th>
          <th><fmt:message key="fecha"/></th>
          <th><fmt:message key="kilos"/></th>
          <th><fmt:message key="precio_kilo"/></th>
        </tr>
    </thead>
    <tbody>
      <c:forEach var="producciones_item" items="${producciones}">
        <tr>
          <td><a href="${pageContext.request.contextPath}/producciones/tabla/form/modificar/produccion.html?id=${producciones_item.id_produccion}" class="table-link"/>${producciones_item.id_produccion}</a></td>
          <td>
              <c:forEach var="cultivos_item" items="${cultivos}">
                  <c:if test="${cultivos_item.id_cultivo}=${producciones_item.id_cultivo}">
                      ${cultivos_item.especie} - ${cultivos_item.variedad}
                  </c:if>
              </c:forEach>
          </td>
          <td>
              <c:forEach var="parcelas_item" items="${parcelas}">
                  <c:if test="${parcelas_item.id_cultivo}=${producciones_item.id_parcela}">
                      ${parcelas_item.zona} - ${parcelas_item.nombre}
                  </c:if>
              </c:forEach>
          </td>
          <td>${producciones_item.fecha}</td>
          <td>${producciones_item.kilos}</td>
          <td>${producciones_item.precio_kilo}</td>
        </tr>
      </c:forEach>
    </tbody>
</table>