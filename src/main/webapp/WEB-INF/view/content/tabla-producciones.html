<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<script>/*<![CDATA[*/
  
    $(window).load(function () {
    
        $('#tabla_producciones').dataTable(tabla_opciones);
        
    });
    
    
/*]]>*/</script> 
<div class="row" th:inline="text">
    <div class="col-xs-12 col-sm-7 col-md-7 col-lg-4">
        <h1 class="page-title txt-color-blueDark" ><i class="fa fa-lg fa-fw fa-table"></i> [[#{producciones}]]</h1>
    </div>
    <div class="col-xs-12 col-sm-5 col-md-5 col-lg-8">
    </div>
</div>
<!-- widget grid -->
<section id="widget-grid" class="" th:inline="text">

    <!-- row -->
    <div class="row">

        <!-- NEW WIDGET START -->
        <article class="col-xs-12 col-sm-12 col-md-12 col-lg-12">

            <!-- Widget ID (each widget will need unique ID)-->
            <div class="jarviswidget" id="wid-id-0" data-widget-colorbutton="false"
                                                    data-widget-editbutton="false"
                                                    data-widget-togglebutton="true"
                                                    data-widget-deletebutton="false"
                                                    data-widget-fullscreenbutton="false"
                                                    data-widget-custombutton="false"
                                                    data-widget-collapsed="false" 
                                                    data-widget-sortable="false">
                <header>
                    <h2><strong th:inline="text">[[#{producciones}]]</strong></h2>					
                    <div class="widget-toolbar"> 
                        <a id="anadir-tipo-labor-link" class="btn btn-default btn-sm" th:href="@{/producciones/tabla/form/produccion.html(id=-1)}">
                             <span class="glyphicon glyphicon-plus"></span> [[#{anadir-produccion}]]
                        </a>
                    </div>
                </header>

                <!-- widget div-->
                <div class="no-padding">
                    <!-- widget edit box -->
                    <div class="jarviswidget-editbox">
                    </div>
                    <!-- widget content -->
                    <div class="widget-body">
                        <div class="widget-body-toolbar">

                        </div>
                            
                        <table id="tabla_producciones" class="table table-striped table-bordered table-hover table-condensed">
                            <thead>
                                <tr>
                                  <th th:text="#{id-produccion}"></th>
                                  <th th:text="#{cultivo}"></th>
                                  <th th:text="#{parcela}"></th>
                                  <th th:text="#{fecha}"></th>
                                  <th th:text="#{kilos}"></th>
                                  <th th:text="#{precio-kilo}"></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr  th:each="producciones_item : ${producciones}">
                                  <td><a th:href="@{/producciones/tabla/form/produccion.html(id=${producciones_item.id_produccion})}" th:text="${producciones_item.id_produccion}">[id_produccion]</a></td>
                                  <td th:each="cultivos_item : ${cultivos}" 
                                      th:if="${cultivos_item.id_cultivo == producciones_item.id_cultivo}">
                                      <a th:href="@{/cultivos/tabla/form/cultivo.html(id=${cultivos_item.id_cultivo})}" 
                                         th:text="${cultivos_item.especie+' - '+cultivos_item.variedad}">[id_cultivo]</a>
                                  </td>
                                  <td th:each="parcelas_item : ${parcelas}" 
                                      th:text="${parcelas_item.zona+' - '+parcelas_item.nombre}"
                                      th:if="${parcelas_item.id_parcela == producciones_item.id_parcela}">[id_parcela]
                                  </td>
                                  <td th:text="${#dates.format(producciones_item.fecha,'dd/MM/yyyy')}">[fecha]</td>
                                  <td th:text="${producciones_item.kilos}">[kilos]</td>
                                  <td th:text="${#numbers.formatDecimal(producciones_item.precio_kilo,1,'POINT',3,'COMMA')}">[precio_kilo]</td>
                                </tr>
                            </tbody>
                        </table>
                        
                    </div>
                </div>

            </div>
        </article>
    </div>
</section>
    
</html>